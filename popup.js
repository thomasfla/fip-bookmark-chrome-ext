// Copyright (c) 2014 The Chromium Authors. All rights reserved.// Use of this source code is governed by a BSD-style license that can be// found in the LICENSE file.document.addEventListener('DOMContentLoaded', function () {      document.getElementById('disp').addEventListener('click', display);       document.getElementById('add').addEventListener('click', save);                  document.getElementById('openPlayer').addEventListener('click',openPlayer); });function httpGet(theUrl){    var xmlHttp = new XMLHttpRequest();    xmlHttp.open( "GET", theUrl, false );    xmlHttp.send( null );    return xmlHttp.responseText;}function save() {    var httpRaw=httpGet("http://www.fipradio.fr/sites/default/files/import_si/si_titre_antenne/FIP_player_current.json")    var json = JSON.parse(httpRaw);    var album= json.current.song.titreAlbum    var titre = json.current.song.titre    var artiste = json.current.song.interpreteMorceau    var annee = json.current.song.anneeEditionMusique    chrome.storage.sync.get('pl', function(result)     {		var playlist = ""	if (result.pl){playlist = result.pl}	playlist=playlist+";new;"+titre+"__"+ artiste+"__"+album+"__"+annee+";end;"	chrome.storage.sync.set({'pl' : playlist}, function() {});    });}function display() {            chrome.tabs.create({url: "display.html"});       var httpRaw=httpGet("http://www.fipradio.fr/sites/default/files/import_si/si_titre_antenne/FIP_player_current.json")    var json = JSON.parse(httpRaw);    var album= json.current.song.titreAlbum    var titre = json.current.song.titre    var artiste = json.current.song.interpreteMorceau    var annee = json.current.song.anneeEditionMusique    chrome.storage.sync.get('pl', function(result)     {        var playlist = result.pl    });}function openPlayer(){    chrome.tabs.create({url: "http://www.fipradio.fr/player"});}